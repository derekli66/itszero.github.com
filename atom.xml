<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[[Zero setLogger: self];]]></title>
  <link href="http://itszero.github.com/atom.xml" rel="self"/>
  <link href="http://itszero.github.com/"/>
  <updated>2014-03-01T18:25:27-05:00</updated>
  <id>http://itszero.github.com/</id>
  <author>
    <name><![CDATA[Zero Cho]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Migrate Android Project to Gradle Build System]]></title>
    <link href="http://itszero.github.com/blog/2013/09/13/migrate-android-project-to-gradle/"/>
    <updated>2013-09-13T13:57:00-04:00</updated>
    <id>http://itszero.github.com/blog/2013/09/13/migrate-android-project-to-gradle</id>
    <content type="html"><![CDATA[<p><a href="http://www.gradle.org/">Gradle</a> is a new build system that Android is currently promoting. It can be
used to build Android project by adding a <a href="http://tools.android.com/tech-docs/new-build-system/user-guide">Gradle Android plugin</a>. It is also
possible that Android would move to Gradle-only build system, ditching the old
ant-way to build things. The <a href="http://developer.android.com/sdk/installing/studio.html">Android Studio</a> only supports Gradle projects.</p>

<h2>Quickstart</h2>

<p>To join the new family, we need to write a new build.gradle file in project
root. An general example of build.gradle would look like the snippet below.
Please note that the system is still in active development, version numbers
could change very soon. I&rsquo;m using Gradle 1.7, plugin 0.5.6, Android Build Tools
17 and my target SDK version is 15.</p>

<figure class='code'><figcaption><span>A simple build.gradle for Android project</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class='groovy'><span class='line'><span class="n">buildscript</span> <span class="o">{</span>
</span><span class='line'>  <span class="n">repositories</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">mavenCentral</span><span class="o">()</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">dependencies</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">classpath</span> <span class="s1">&#39;com.android.tools.build:gradle:0.5.6&#39;</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">apply</span> <span class="nl">plugin:</span> <span class="s1">&#39;android&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="n">android</span> <span class="o">{</span>
</span><span class='line'>  <span class="n">compileSdkVersion</span> <span class="mi">15</span>
</span><span class='line'>  <span class="n">buildToolsVersion</span> <span class="s2">&quot;17&quot;</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">sourceSets</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">main</span> <span class="o">{</span>
</span><span class='line'>      <span class="n">manifest</span><span class="o">.</span><span class="na">srcFile</span> <span class="s1">&#39;AndroidManifest.xml&#39;</span>
</span><span class='line'>        <span class="n">java</span><span class="o">.</span><span class="na">srcDirs</span> <span class="o">=</span> <span class="o">[</span><span class="s1">&#39;src&#39;</span><span class="o">]</span>
</span><span class='line'>        <span class="n">res</span><span class="o">.</span><span class="na">srcDirs</span> <span class="o">=</span> <span class="o">[</span><span class="s1">&#39;res&#39;</span><span class="o">]</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>This simple gradle file should be able to build most of standard Android
projects. But what if I have special need? I&rsquo;m going to talk about how to
add support for AndroidAnnotation and token replacement below.</p>

<h3>Android Annotation</h3>

<p><a href="https://github.com/excilys/androidannotations">AndroidAnnotation</a> is a set of very useful annotations that you could use in
your code to make your code shorter and more easier to read. The framework
utilize a annotation processor to scan through your source code file and
generate helper classes. To integrate it, we need to do 2 things:</p>

<ul>
<li>Add processor flags to Java compiler</li>
<li>Add androidannotation-api dependency</li>
</ul>


<h4>Manipulating Compile Task</h4>

<p>To add extra flags to compiler, we need to use the interface Android Gradle
plugin exposed to access relevant tasks. The build plugin organize tasks into
different &ldquo;variants&rdquo;, some basic variants includes debug and release. To
iterate through all variants, we could use <code>android.applicationVariants.all</code>.</p>

<figure class='code'><figcaption><span>Add support of Android annotation</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
</pre></td><td class='code'><pre><code class='groovy'><span class='line'><span class="c1">// Code based on https://github.com/excilys/androidannotations/issues/676</span>
</span><span class='line'><span class="kt">def</span> <span class="nf">getSourceSetName</span><span class="o">(</span><span class="n">variant</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>  <span class="k">return</span> <span class="k">new</span> <span class="nf">File</span><span class="o">(</span><span class="n">variant</span><span class="o">.</span><span class="na">dirName</span><span class="o">).</span><span class="na">getName</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">android</span><span class="o">.</span><span class="na">applicationVariants</span><span class="o">.</span><span class="na">all</span> <span class="o">{</span> <span class="n">variant</span> <span class="o">-&gt;</span>
</span><span class='line'>
</span><span class='line'>  <span class="kt">def</span> <span class="n">aptOutputDir</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="na">file</span><span class="o">(</span><span class="s2">&quot;build/source/apt&quot;</span><span class="o">)</span>
</span><span class='line'>  <span class="kt">def</span> <span class="n">aptOutput</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="n">aptOutputDir</span><span class="o">,</span> <span class="n">variant</span><span class="o">.</span><span class="na">dirName</span><span class="o">)</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">android</span><span class="o">.</span><span class="na">sourceSets</span><span class="o">[</span><span class="n">getSourceSetName</span><span class="o">(</span><span class="n">variant</span><span class="o">)].</span><span class="na">java</span><span class="o">.</span><span class="na">srcDirs</span> <span class="o">+=</span> <span class="n">aptOutput</span><span class="o">.</span><span class="na">getPath</span><span class="o">()</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">variant</span><span class="o">.</span><span class="na">javaCompile</span><span class="o">.</span><span class="na">options</span><span class="o">.</span><span class="na">compilerArgs</span> <span class="o">+=</span> <span class="o">[</span>
</span><span class='line'>    <span class="s1">&#39;-processorpath&#39;</span><span class="o">,</span> <span class="n">configurations</span><span class="o">.</span><span class="na">apt</span><span class="o">.</span><span class="na">getAsPath</span><span class="o">(),</span>
</span><span class='line'>    <span class="s1">&#39;-s&#39;</span><span class="o">,</span> <span class="n">aptOutput</span>
</span><span class='line'>  <span class="o">]</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">variant</span><span class="o">.</span><span class="na">javaCompile</span><span class="o">.</span><span class="na">source</span> <span class="o">=</span> <span class="n">variant</span><span class="o">.</span><span class="na">javaCompile</span><span class="o">.</span><span class="na">source</span><span class="o">.</span><span class="na">filter</span> <span class="o">{</span> <span class="n">p</span> <span class="o">-&gt;</span>
</span><span class='line'>    <span class="k">return</span> <span class="o">!</span><span class="n">p</span><span class="o">.</span><span class="na">getPath</span><span class="o">().</span><span class="na">startsWith</span><span class="o">(</span><span class="n">aptOutputDir</span><span class="o">.</span><span class="na">getPath</span><span class="o">())</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">variant</span><span class="o">.</span><span class="na">javaCompile</span><span class="o">.</span><span class="na">doFirst</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">aptOutput</span><span class="o">.</span><span class="na">mkdirs</span><span class="o">()</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>The <code>configurations.apt</code> is missing at the moment. We used the variable to
store path to Android Annotation processor and we use Gradle&rsquo;s dependencies
managing feature to resolve the path for us.</p>

<figure class='code'><figcaption><span>Resolve Android Annotation processor path</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='groovy'><span class='line'><span class="n">configurations</span> <span class="o">{</span>
</span><span class='line'>  <span class="n">apt</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">dependencies</span> <span class="o">{</span>
</span><span class='line'>  <span class="n">apt</span> <span class="nf">files</span><span class="o">(</span><span class="s1">&#39;compile-libs/androidannotations-2.7.1.jar&#39;</span><span class="o">)</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Add dependencies</h2>

<p>For managing dependencies, Gradle uses a <code>dependencies</code> block. The following
code snippets shows different ways to include dependencies. <code>fileTree</code> can be
used to iterate files in directory, <code>string</code> will be resolved using
repositories(default includes Maven Central) and <code>project</code> is used to reference
dependent local projects. We will talk about multi-project build support later.</p>

<figure class='code'><figcaption><span>Different ways to specify dependencies</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='groovy'><span class='line'><span class="n">dependencies</span> <span class="o">{</span>
</span><span class='line'>  <span class="n">compile</span> <span class="nf">fileTree</span><span class="o">(</span><span class="nl">dir:</span> <span class="s1">&#39;libs&#39;</span><span class="o">,</span> <span class="nl">include:</span> <span class="s1">&#39;*.jar&#39;</span><span class="o">,</span> <span class="nl">exclude:</span> <span class="s1">&#39;android-support-v4.jar&#39;</span><span class="o">)</span>
</span><span class='line'>  <span class="n">compile</span> <span class="s1">&#39;com.android.support:support-v4:18.0.+&#39;</span>
</span><span class='line'>  <span class="n">compile</span> <span class="nf">project</span><span class="o">(</span><span class="s1">&#39;:extra:actionbarsherlock&#39;</span><span class="o">)</span>
</span><span class='line'>  <span class="n">compile</span> <span class="nf">project</span><span class="o">(</span><span class="s1">&#39;:extra:ViewPagerIndicator&#39;</span><span class="o">)</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Say if you put the Android Annotation API jar into libs directory, the build
system should picked it up by now.</p>

<h2>Token Replacement</h2>

<p>Sometimes we would like to have a way to reference build version, git revisions
from Java code. To accomplish this, we need to collect those informations and
put it in a Java source file which will be picked out later during compilation.</p>

<p>Let&rsquo;s say if you have a AppBuild.java looks like below and we put it in
<code>compile-libs</code> directory.</p>

<figure class='code'><figcaption><span>Template of AppBuild.java</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kn">package</span> <span class="n">idv</span><span class="o">.</span><span class="na">Zero</span><span class="o">.</span><span class="na">example</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">AppBuild</span> <span class="o">{</span>
</span><span class='line'>  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">GIT_REV</span> <span class="o">=</span> <span class="s">&quot;@git-rev@&quot;</span><span class="o">;</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Note the <code>@git-rev@</code> is the token we will replace with current git revision
number each time we build the project. Now we have the template, we need to rig
it into the build system. The way I&rsquo;m doing this is by adding a generation task
per variant and setup the dependency for compiling task to be depend on this
generation task.</p>

<figure class='code'><figcaption><span>Rig token replacement into the build system</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='groovy'><span class='line'><span class="kn">import</span> <span class="nn">org.apache.tools.ant.filters.ReplaceTokens</span>
</span><span class='line'>
</span><span class='line'><span class="n">android</span><span class="o">.</span><span class="na">applicationVariants</span><span class="o">.</span><span class="na">all</span> <span class="o">{</span> <span class="n">variant</span> <span class="o">-&gt;</span>
</span><span class='line'>  <span class="kt">def</span> <span class="n">taskName</span> <span class="o">=</span> <span class="s2">&quot;generateAppBuild${variant.dirName.capitalize()}&quot;</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">task</span> <span class="o">(</span><span class="n">taskName</span><span class="o">,</span> <span class="nl">type:</span> <span class="n">Copy</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="kt">def</span> <span class="n">todir</span> <span class="o">=</span> <span class="s2">&quot;build/source/AppBuild/${variant.dirName}/cc/hypo/pieceroids&quot;</span>
</span><span class='line'>    <span class="k">new</span> <span class="nf">File</span><span class="o">(</span><span class="n">todir</span><span class="o">).</span><span class="na">mkdirs</span><span class="o">()</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">from</span> <span class="n">project</span><span class="o">.</span><span class="na">file</span><span class="o">(</span><span class="s1">&#39;compile-libs/AppBuild.java&#39;</span><span class="o">)</span>
</span><span class='line'>    <span class="n">into</span> <span class="n">todir</span>
</span><span class='line'>    <span class="n">outputs</span><span class="o">.</span><span class="na">upToDateWhen</span> <span class="o">{</span> <span class="kc">false</span> <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="kt">def</span> <span class="n">proc</span> <span class="o">=</span> <span class="s2">&quot;git rev-parse --verify HEAD&quot;</span><span class="o">.</span><span class="na">execute</span><span class="o">()</span>
</span><span class='line'>    <span class="n">proc</span><span class="o">.</span><span class="na">waitFor</span><span class="o">()</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">filter</span><span class="o">(</span><span class="n">ReplaceTokens</span><span class="o">,</span> <span class="nl">tokens:</span><span class="o">[</span><span class="s1">&#39;git-rev&#39;</span><span class="o">:</span> <span class="n">proc</span><span class="o">.</span><span class="na">in</span><span class="o">.</span><span class="na">text</span><span class="o">.</span><span class="na">trim</span><span class="o">()])</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>  <span class="n">tasks</span><span class="o">[</span><span class="s2">&quot;compile${variant.dirName.capitalize()}&quot;</span><span class="o">].</span><span class="na">dependsOn</span><span class="o">(</span><span class="n">taskName</span><span class="o">)</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>What this code snippets do is to initiate a copy task by the name
<code>generateAppBuild${variant}</code>. Note the outputs.upToDateWhen line would cause
the task to always run, otherwise it&rsquo;ll be skipped if the source file is not
changed, which is not what we want. You&rsquo;ll also need to import ReplaceTokens
filter from our good old friend, <code>ant</code>.</p>

<h2>Multi-Projects</h2>

<p>It is very common that you might have some sub-projects that needs to be build
together. Previously, I showed that you could have <code>compile
project(':path:to:project')</code> in <code>dependencies</code> block to have it being included
during compile time. However, you need some extra setup to make it work. You
need an extra file called <code>settings.gradle</code> with those lines.</p>

<figure class='code'><figcaption><span>settings.gradle for multi-projects</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='groovy'><span class='line'><span class="n">include</span> <span class="s2">&quot;:extra:actionbarsherlock&quot;</span>
</span><span class='line'><span class="n">include</span> <span class="s2">&quot;:extra:ViewPagerIndicator&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>This indicates you have two sub-projects, they&rsquo;re located at
<code>${project.root}/extra/actionbarsherlock</code> and
<code>${project.root}/extra/ViewPagerIndicator</code>. Gradle will look for build.gradle
inside those directories and set up project dependencies automatically.</p>

<h2>Conclusion</h2>

<p>In this article, I showed how to migrate your android project to utilize Gradle
as the build system. Additionally, I also showed a way to integrate
Android Annotations and build information generation. I hope these would be
enough to get your started with Gradle. Here is the final build.gradle you
should have after all these extra codes.</p>

<figure class='code'><figcaption><span>Final build.gradle</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
</pre></td><td class='code'><pre><code class='groovy'><span class='line'><span class="kn">import</span> <span class="nn">org.apache.tools.ant.filters.ReplaceTokens</span>
</span><span class='line'>
</span><span class='line'><span class="n">buildscript</span> <span class="o">{</span>
</span><span class='line'>  <span class="n">repositories</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">mavenCentral</span><span class="o">()</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">dependencies</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">classpath</span> <span class="s1">&#39;com.android.tools.build:gradle:0.5.6&#39;</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">apply</span> <span class="nl">plugin:</span> <span class="s1">&#39;android&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="n">configurations</span> <span class="o">{</span>
</span><span class='line'>  <span class="n">apt</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">dependencies</span> <span class="o">{</span>
</span><span class='line'>  <span class="n">compile</span> <span class="nf">fileTree</span><span class="o">(</span><span class="nl">dir:</span> <span class="s1">&#39;libs&#39;</span><span class="o">,</span> <span class="nl">include:</span> <span class="s1">&#39;*.jar&#39;</span><span class="o">,</span> <span class="nl">exclude:</span> <span class="s1">&#39;android-support-v4.jar&#39;</span><span class="o">)</span>
</span><span class='line'>  <span class="n">compile</span> <span class="s1">&#39;com.android.support:support-v4:18.0.+&#39;</span>
</span><span class='line'>  <span class="n">compile</span> <span class="nf">project</span><span class="o">(</span><span class="s1">&#39;:extra:actionbarsherlock&#39;</span><span class="o">)</span>
</span><span class='line'>  <span class="n">compile</span> <span class="nf">project</span><span class="o">(</span><span class="s1">&#39;:extra:ViewPagerIndicator&#39;</span><span class="o">)</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">apt</span> <span class="nf">files</span><span class="o">(</span><span class="s1">&#39;compile-libs/androidannotations-2.7.1.jar&#39;</span><span class="o">)</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="kt">def</span> <span class="nf">getSourceSetName</span><span class="o">(</span><span class="n">variant</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="k">new</span> <span class="nf">File</span><span class="o">(</span><span class="n">variant</span><span class="o">.</span><span class="na">dirName</span><span class="o">).</span><span class="na">getName</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">android</span><span class="o">.</span><span class="na">applicationVariants</span><span class="o">.</span><span class="na">all</span> <span class="o">{</span> <span class="n">variant</span> <span class="o">-&gt;</span>
</span><span class='line'>  <span class="kt">def</span> <span class="n">aptOutputDir</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="na">file</span><span class="o">(</span><span class="s2">&quot;build/source/apt&quot;</span><span class="o">)</span>
</span><span class='line'>  <span class="kt">def</span> <span class="n">aptOutput</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="n">aptOutputDir</span><span class="o">,</span> <span class="n">variant</span><span class="o">.</span><span class="na">dirName</span><span class="o">)</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">android</span><span class="o">.</span><span class="na">sourceSets</span><span class="o">[</span><span class="n">getSourceSetName</span><span class="o">(</span><span class="n">variant</span><span class="o">)].</span><span class="na">java</span><span class="o">.</span><span class="na">srcDirs</span> <span class="o">+=</span> <span class="n">aptOutput</span><span class="o">.</span><span class="na">getPath</span><span class="o">()</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">variant</span><span class="o">.</span><span class="na">javaCompile</span><span class="o">.</span><span class="na">options</span><span class="o">.</span><span class="na">compilerArgs</span> <span class="o">+=</span> <span class="o">[</span>
</span><span class='line'>    <span class="s1">&#39;-processorpath&#39;</span><span class="o">,</span> <span class="n">configurations</span><span class="o">.</span><span class="na">apt</span><span class="o">.</span><span class="na">getAsPath</span><span class="o">(),</span>
</span><span class='line'>    <span class="s1">&#39;-s&#39;</span><span class="o">,</span> <span class="n">aptOutput</span>
</span><span class='line'>  <span class="o">]</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">variant</span><span class="o">.</span><span class="na">javaCompile</span><span class="o">.</span><span class="na">source</span> <span class="o">=</span> <span class="n">variant</span><span class="o">.</span><span class="na">javaCompile</span><span class="o">.</span><span class="na">source</span><span class="o">.</span><span class="na">filter</span> <span class="o">{</span> <span class="n">p</span> <span class="o">-&gt;</span>
</span><span class='line'>    <span class="k">return</span> <span class="o">!</span><span class="n">p</span><span class="o">.</span><span class="na">getPath</span><span class="o">().</span><span class="na">startsWith</span><span class="o">(</span><span class="n">aptOutputDir</span><span class="o">.</span><span class="na">getPath</span><span class="o">())</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">variant</span><span class="o">.</span><span class="na">javaCompile</span><span class="o">.</span><span class="na">doFirst</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">aptOutput</span><span class="o">.</span><span class="na">mkdirs</span><span class="o">()</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">android</span><span class="o">.</span><span class="na">sourceSets</span><span class="o">[</span><span class="n">getSourceSetName</span><span class="o">(</span><span class="n">variant</span><span class="o">)].</span><span class="na">java</span><span class="o">.</span><span class="na">srcDirs</span> <span class="o">+=</span> <span class="s2">&quot;build/source/AppBuild/${variant.dirName}&quot;</span>
</span><span class='line'>
</span><span class='line'>  <span class="kt">def</span> <span class="n">taskName</span> <span class="o">=</span> <span class="s2">&quot;generateAppBuild${variant.dirName.capitalize()}&quot;</span>
</span><span class='line'>  <span class="n">task</span> <span class="o">(</span><span class="n">taskName</span><span class="o">,</span> <span class="nl">type:</span> <span class="n">Copy</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="kt">def</span> <span class="n">todir</span> <span class="o">=</span> <span class="s2">&quot;build/source/AppBuild/${variant.dirName}/cc/hypo/pieceroids&quot;</span>
</span><span class='line'>    <span class="k">new</span> <span class="nf">File</span><span class="o">(</span><span class="n">todir</span><span class="o">).</span><span class="na">mkdirs</span><span class="o">()</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">from</span> <span class="n">project</span><span class="o">.</span><span class="na">file</span><span class="o">(</span><span class="s1">&#39;compile-libs/AppBuild.java&#39;</span><span class="o">)</span>
</span><span class='line'>    <span class="n">into</span> <span class="n">todir</span>
</span><span class='line'>    <span class="n">outputs</span><span class="o">.</span><span class="na">upToDateWhen</span> <span class="o">{</span> <span class="kc">false</span> <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="kt">def</span> <span class="n">proc</span> <span class="o">=</span> <span class="s2">&quot;git rev-parse --verify HEAD&quot;</span><span class="o">.</span><span class="na">execute</span><span class="o">()</span>
</span><span class='line'>    <span class="n">proc</span><span class="o">.</span><span class="na">waitFor</span><span class="o">()</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">filter</span><span class="o">(</span><span class="n">ReplaceTokens</span><span class="o">,</span> <span class="nl">tokens:</span><span class="o">[</span><span class="s1">&#39;git-rev&#39;</span><span class="o">:</span> <span class="n">proc</span><span class="o">.</span><span class="na">in</span><span class="o">.</span><span class="na">text</span><span class="o">.</span><span class="na">trim</span><span class="o">()])</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>  <span class="n">tasks</span><span class="o">[</span><span class="s2">&quot;compile${variant.dirName.capitalize()}&quot;</span><span class="o">].</span><span class="na">dependsOn</span><span class="o">(</span><span class="n">taskName</span><span class="o">)</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">android</span> <span class="o">{</span>
</span><span class='line'>  <span class="n">compileSdkVersion</span> <span class="mi">15</span>
</span><span class='line'>  <span class="n">buildToolsVersion</span> <span class="s2">&quot;17&quot;</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">sourceSets</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">main</span> <span class="o">{</span>
</span><span class='line'>      <span class="n">manifest</span><span class="o">.</span><span class="na">srcFile</span> <span class="s1">&#39;AndroidManifest.xml&#39;</span>
</span><span class='line'>        <span class="n">java</span><span class="o">.</span><span class="na">srcDirs</span> <span class="o">=</span> <span class="o">[</span><span class="s1">&#39;src&#39;</span><span class="o">]</span>
</span><span class='line'>        <span class="n">res</span><span class="o">.</span><span class="na">srcDirs</span> <span class="o">=</span> <span class="o">[</span><span class="s1">&#39;res&#39;</span><span class="o">]</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Two-factor Authentication for Windows]]></title>
    <link href="http://itszero.github.com/blog/2013/04/24/two-factor-authentication-for-windows/"/>
    <updated>2013-04-24T15:25:00-04:00</updated>
    <id>http://itszero.github.com/blog/2013/04/24/two-factor-authentication-for-windows</id>
    <content type="html"><![CDATA[<p>I had a remote running Windows with Remote Desktop enabled. I&rsquo;m really
comfortable about just putting it online with the bare minimal Windows
authentication protection. So I went online to do a little research and I found
out that the algorithm Google Authenticator is using (it&rsquo;s called TOTP) could
be integrated to Windows authentication system. Here is how to do it.</p>

<p>The key thing here is <a href="http://code.google.com/p/multi-one-time-password--credential-provider/">MultiOTP-CP</a>, it&rsquo;s a credential provider for Windows to
enable two-factor authentication. Before we get into that, we will need to
install its dependency, <a href="http://www.multiotp.net">MultiOTP</a>. MultiOTP is a library to deal with one-time
passwords. You can download it from [<a href="http://www.multiotp.net">http://www.multiotp.net</a>]. Extract it to
<code>C:\multiotp</code>. Now, we need to tie your Windows account with a proper key for
TOTP elgorithm. Open your command prompt and switch to <code>C:\multiotp</code>. Type the
following command to setup two-factor auth.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>multiotp -debug -create test [user name] [20-bytes(160bits) key] [4 digit pin, doesn't matter.] 6 30</span></code></pre></td></tr></table></div></figure>


<p>If it says success, try you could verify it by using</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>multiotp -debug [user name] [OTP generated on your phone]</span></code></pre></td></tr></table></div></figure>


<p>If you need some help with generating key, I recommend <a href="https://github.com/markbao/speakeasy">speakeasy</a>. It&rsquo;s not
exactly a tool but a two-factor authentication library for node.js. It could
generate key and url to QR code for your phone to scan in one line. If you
don&rsquo;t mind go through installing node.js, try it!</p>

<p>Once that&rsquo;s done, install multiotp-cp and it&rsquo;s done! Next time you need to
login to Windows, you&rsquo;ll see an extra field for you to input one-time password.
Simple as that!</p>

<p><a href="http://itszero.github.com/images/posts/multiotp-login.png" class="fancybox"><img src="http://itszero.github.com/images/posts/multiotp-login.png" width="554" title="&#34;MulitOTP-CP login screen&#34;" alt="&#34;MulitOTP-CP login screen&#34;"></a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[(my way to) Write a Hangman AI]]></title>
    <link href="http://itszero.github.com/blog/2012/10/29/my-way-to-write-a-hangman-ai/"/>
    <updated>2012-10-29T20:17:00-04:00</updated>
    <id>http://itszero.github.com/blog/2012/10/29/my-way-to-write-a-hangman-ai</id>
    <content type="html"><![CDATA[<p>I was asked to write a hangman AI as a challenge last week. I was asked not to
leak the detail, so I will not post my solution here. However, the hangman
problem itself is a well-known problem, I would like to share some thoughts
that I used to build my hangman solver.</p>

<h2>Preface</h2>

<p>There is a <a href="http://en.wikipedia.org/wiki/Hangman_(game)">hangman</a> page provides detailed information for hangman
game. However, I would like to describe it in a shorter, more programmer&rsquo;s way.</p>

<h3>Input</h3>

<p>You will receive an serialized object containing following information:</p>

<ul>
<li><p>state: The state is a string that reveals your correctly guessed characters
in the string. For those unrevealed characters, a <code>_</code> is placed in those
positions. For example, say the answer is &ldquo;apple&rdquo; and you guessed <em>p</em>, the
state string will be <code>_pp__</code>. Please note that the state could contain
multiple words, a sentence.</p></li>
<li><p>remaining_guesses: How many times you can make a wrong guess before the game
is over.</p></li>
<li><p>status: It could be one of {<strong>WIN</strong>, <strong>ONGOING</strong>, <strong>LOSE</strong>}. The game will
start as <strong>ONGOING</strong>.  If you reveal all characters before you used up all
guesses, you <strong>WIN</strong> the game. If you make too many wrong guesses, you
<strong>LOSE</strong> the game.</p></li>
</ul>


<h3>Output</h3>

<p>For each game, you will start with a empty state. You must keep giving out a
character as a guess until the status is <strong>WIN</strong> or <strong>LOSE</strong>.</p>

<h2>Thoughts</h2>

<p>Before we talk about anything, I need to clarify one thing: I am not familiar
with NLP(Natural Language Processing) techniques. I might use some dumb way to
solve this problem, but, well, it&rsquo;s at least something that my intuition leads
me to.</p>

<h3>Initial Guess</h3>

<p>If the state is all unrevealed, I will do an initial guess. The initial guess
uses vowels, the famous a-e-i-o-u. However, I use a little variation here. I do
not guess the vowels in this order, I sort it by the frequency of characters
appearing in dictionary. I guess by e-i-o-u-a. The initial guess stops whenever
a character works, then we go to word attack mode.</p>

<h3>Word Attack</h3>

<p>Since I don&rsquo;t have any knowledge in the language model, I will launch a
word-based attack. In my implementation, I only attack one word at a time. It
is very important that we choose the right word to attack. If we pick the wrong
word to guess, the probability to produce a correct guess will decrease. First,
I assume that, in most cases, the word-to-be-attacked will be included in my
dictionary. If we don&rsquo;t make this assumption, it is hard to do optimization
since you have to assume you have no knowledge regarding the context.</p>

<h4>Which Word?</h4>

<p>The best word to attack, in my opinion, is the word having most characters
solved and having longest length as possible. Now, to decide it, the formula I
used is:</p>

<div class="mathjax">
$$
f_{cost}(w_i) = \frac{f_{unsolved}(w_i)}{f_{strlen}(w_i)^2}
$$
</div>


<p>The best word to attack will have smallest cost from this formula. It first
calculate the percentage of unsolved characters in the word, so the word with
most portion of its characters revealed now having the smallest cost now. However, say we have a
word <code>a_</code>, the word is now 50% solved but to finish the second character, you
only need one move. It sounds good, but it does not generate any <em>side-effect</em>.
Say now we have a word <code>co__ec__e__</code> and you already know the full word is
<code>correctness</code>. You can now confidently send answers <code>[r, t, n, s]</code>. You may
reveal characters in other words in the process, thus increase the overall
probability of making right guesses.</p>

<h4>The n-grams</h4>

<blockquote><p>In the fields of computational linguistics and probability, an n-gram is a<br/>contiguous sequence of n items from a given sequence of text or speech. An<br/>n-gram could be any combination of letters. However, the items in question can<br/>be phonemes, syllables, letters, words or base pairs according to the<br/>application. The n-grams typically are collected from a text or speech corpus.</p><footer><strong>Wikipedia</strong> <cite><a href='http://en.wikipedia.org/wiki/N-gram'>N-gram</a></cite></footer></blockquote>


<p>Since I&rsquo;m not a NLP guy, I will just quote the definition of n-gram from
Wikipedia. In my solver, I use two type of n-grams: A bigram table and a
unigram table. Before I calculate those, I will filter the dictionary to a
smaller version by eliminating words using the current state and guessed words.
For example, the state of the word I&rsquo;m attacking is <code>a__le</code>, and I haven&rsquo;t
guessed <code>[p, z]</code>. I will generate a regular expression of <code>a[pz][pz]le</code> and
apply it on my dictionary. Then, I calculate those n-grams table in current
reduced context.</p>

<h5>Unigram table</h5>

<p>My usage for unigram is very simple. I merely calculate the frequency of a
characters shows in my dictionary.</p>

<h5>Bigram table</h5>

<p>The bigram I&rsquo;m trying to build is based on the connection for two continuous
characters. I will split each word into bigrams using the following ruby code:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">bigram_split</span><span class="p">(</span><span class="n">str</span><span class="p">)</span>
</span><span class='line'>  <span class="s2">&quot;^</span><span class="si">#{</span><span class="n">str</span><span class="si">}</span><span class="s2">$&quot;</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">each_cons</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">to_a</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="o">&gt;&gt;</span> <span class="n">bigram_split</span><span class="p">(</span><span class="s2">&quot;hello&quot;</span><span class="p">)</span>
</span><span class='line'><span class="o">=&gt;</span> <span class="o">[[</span><span class="s2">&quot;^&quot;</span><span class="p">,</span> <span class="s2">&quot;h&quot;</span><span class="o">]</span><span class="p">,</span> <span class="o">[</span><span class="s2">&quot;h&quot;</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="o">]</span><span class="p">,</span> <span class="o">[</span><span class="s2">&quot;e&quot;</span><span class="p">,</span> <span class="s2">&quot;l&quot;</span><span class="o">]</span><span class="p">,</span> <span class="o">[</span><span class="s2">&quot;l&quot;</span><span class="p">,</span> <span class="s2">&quot;l&quot;</span><span class="o">]</span><span class="p">,</span> <span class="o">[</span><span class="s2">&quot;l&quot;</span><span class="p">,</span> <span class="s2">&quot;o&quot;</span><span class="o">]</span><span class="p">,</span> <span class="o">[</span><span class="s2">&quot;o&quot;</span><span class="p">,</span> <span class="s2">&quot;$&quot;</span><span class="o">]]</span>
</span></code></pre></td></tr></table></div></figure>


<p>I collect those bigrams and calculate the frequency for each of those showing
up among whole bigrams space for current dictionary.</p>

<h4>The Attack</h4>

<p>Now everything that we need before launching the attack is prepared, we can
start to work on a guess. The first step is to acquire bigrams from the word
state. The only bigrams we need is those with one of the character unsolved,
but not all unsolved. In a more direct way, what we need is <code>[*, '_'] ['_',
*]</code> but not <code>['_', '_']</code>. For those unsolved bigrams, I use the bigram table
I just calculated to get a count on how frequent of a character shows up after
or before a known character. I then sum the count for all bigrams in the word
state and pick the character with highest count as the guess. It&rsquo;s that simple.</p>

<h4>Falling back</h4>

<p>Well, sometimes you just don&rsquo;t have any clue. In that case, my program will
first falls back to attack on second best word and so on. If all words are
tried, but we still have no clue. I&rsquo;ll just fire a random guess using unigram
table. However, it is really a wild guess, the success rate of making a correct
guess using unigram table is not high.</p>

<h2>Future Work</h2>

<p>There are many ideas that can be implemented to improve my solution. Like
implementing a word bigrams to further weight the possibility of characters
bigrams could be useful, but it would require more research into NLP field. I
think it is really a fun challenge. If you got some spare time, try it!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Applying PhD for dummies]]></title>
    <link href="http://itszero.github.com/blog/2012/09/04/applying-phd-for-dummies/"/>
    <updated>2012-09-04T14:57:00-04:00</updated>
    <id>http://itszero.github.com/blog/2012/09/04/applying-phd-for-dummies</id>
    <content type="html"><![CDATA[<p>Applying for a PhD degree can be troublesome. There are agencies out there
helping people deal with the process. Is it really necessary to pay lots of
money for it? My answer is simply negative. All you need is a right set of tool
to track the progress. I will share my experience of applying both the PhD and
F-1 VISA (this part only applies to students in Taiwan, as your experience may
vary). I started working on my application very late and it resulted in a rush
application process. Hope by sharing my experience, you can apply for PhD
programs more easily. :)</p>

<h2>What do you need?</h2>

<p>Before you begin, there are some prerequisites you need to take care of. Here
is a short list:</p>

<ul>
<li>The TOEFL examination</li>
<li>The GRE examination</li>
<li>Rsum</li>
<li>Statement of Purpose (and/or Personal Statement)</li>
<li>Financial support document</li>
<li>Transcripts for your BS and MS degree</li>
</ul>


<p>Please note that this may not be a complete list of everything you will need
for every school.  Some schools may ask for additional documents, for example,
some schools may requires you to take the Subject GRE examination as well. If
you want to apply for the Fall semester, the deadline is usually in December of
previous year. For example, you want to apply for Fall 2012. The application
deadline would be around December 2011 to January 2012. I would suggest you to
take care all of the examinations before November and leave a whole month for
getting your application ready as you will need to wait for the deliveries of
every documents and letters of recommendation(LoR).</p>

<h2>TOEFL/GRE</h2>

<p>You usually need to have your examinations scores delivered to the school by
the end of the application deadline. Some schools may have one to two weeks
extension for test scores. Since the ETS can sometimes be very unproductive,
I would suggest you to finish the test before November. Oh, please take a note
of the TOEFL/GRE institution code of your target schools. You can request a few
free copies on the spot after taking the tests to save money. :P</p>

<p>I don&rsquo;t really have tips for preparing, as I wan&rsquo;t very well prepared. However,
there is some insights I can share. If you go to PTT, Taiwan&rsquo;s largest
electronic bulletin board system, popular among the university students, and
read those test-taking experience shared in TOEFL/GRE board. You will see that
many people are complaining about the noise during the oral part of tests. Here
is one thing I can tell you, do your tests quickly. If you&rsquo;re quick enough, you
can be the first one to answer the speaking questions before everyone else, so
you can relax and do your tests at the best you can.</p>

<p>If you have friends who lives in the States, you can talk to him/her in for
practice, you will have no problem on TOEFL test. However, GRE is a lot
different. Though the verbal part of GRE may be a pain in the ass, the
quantitative part is usually easy for Taiwanese students. We all have that
miserable experience preparing for college entrance exam, right? You will
definitely need some time to memorize some advanced vocabulary for GRE. Another
thing that you may want to practice is AWA. AWA is like writing a small thesis
on a given topic. There is no right or wrong. However, you will need to express
your opinion systematically and defense your prospective with solid reasons. My
tips? Write, write, and read. Find some time to write things down in English,
preferably a long blog post or diaries. Read some articles from some well-known
journals or magazines. Once you get used to the way of Americans thinking, you
should not have problem on AWA.</p>

<p>Last thing to do before taking tests: Spend a day to read some example test
questions. It is not your objective to memorize all the questions. What you
need to do is to get used to different kind of questions and know how to rush
to an answer in no time.</p>

<h2>Rsum</h2>

<p>I think that you should have your rsum prepared all the time. Trust me. You
will not want to write down your whole life in a day. It will be an erroneous
and boring process. I would suggest you to write in Markdown syntax (or any
plain text formatting syntax you prefer). Writing things down in plain text
format can help you to organize things more quickly. If you use Markdown, you
can easily convert it into a web page and put it online for display. I will
suggest that you do a separate print version using LaTeX, as the template based
on LaTeX gives a professional look. It is so easy to maintain compared to those
made using Word, Pages or even InDesign.</p>

<p>You can find my rsum <a href="http://itszero.github.com/resume">here</a>. Make sure you
include those sections: basic personal information, education histories, work
experiences, publications, some projects that you involved in before. You may
want to put as much as possible to show your strength, but do not make it more
than 2 pages. Professors and your future employers simply do not have time to
read a long rsum. Keep it clean and simple. Highlights the most
important things in your life! (Update: If you&rsquo;re preparing resume for job
application, make it in one page.)</p>

<h2>SoP and PS</h2>

<p>SoP (Statement of Purpose) and PS (Personal Statement) aws quite confusing for
me. The purpose of the two documents is actually the same. It presents your
background and personality. I distinguish those two by applying more personal
touch to the personal statement. You may want to use one or two paragraph to
state a personal experience that leads you to your current study, while focus
your SoP solely on the what you want to do in the future. I think it should be
able to fit in a page or two. I doubt professors would have much time to read,
so make it simple and clear.</p>

<h2>Financial Document</h2>

<p>Hmm, this should be the easiest part. I&rsquo;m not going to waste much time here.
You just deposit money into an account, and apply for the &ldquo;Certificate of
Deposit&rdquo;, or  in Chinese. For the amount, please ask your school for
the details.  However, an average number would be USD$20000~30000. Some school
may not request for it until they&rsquo;re applying I-20 for you. If that is the
case, and you have a scholarship or assistantship offering, you may ask your
department or graduate office for the correct amount you will need to prepare.</p>

<h2>Some Tips</h2>

<p>During the process, I would suggest you to use some spreadsheets software for
managing application process of all the different schools. <a href="http://docs.google.com/">Google
Docs</a> would be a good choice. Make sure you print (as
PDF, to save papers) and archive everything. Track every letter of
recommendations, TOEFL/GRE scores and results. If you do this, you will always
have a dashboard for all those different applications. Likewise, since you will
need to log into many systems during the application. I would suggest you to
use some password manager like <a href="https://agilebits.com/onepassword">1Password</a>,
<a href="http://keepass.info/">KeePass</a> to track every used password, because every
system will have its own requirement on password. It will help a lot.</p>

<h2>Conclusions</h2>

<p>You should have everything you need to know by now. For the things I didn&rsquo;t
mentioned above, look for your desired school. You might find some help on the
internet as well. Try StudyAbroad on PTT BBS if you&rsquo;re a Taiwanese student. I
hope this experience can be of help. I also hope that you will be admitted by your
favorite school. ;)</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[the Solarized Dark Vim]]></title>
    <link href="http://itszero.github.com/blog/2012/04/19/the-solarized-dark-vim/"/>
    <updated>2012-04-19T22:38:00-04:00</updated>
    <id>http://itszero.github.com/blog/2012/04/19/the-solarized-dark-vim</id>
    <content type="html"><![CDATA[<p>Today, I spent a whole day on reconfigure my Vim. Vim is a powerful monster
that needs care. Once you feed it with (your precious) time, Vim will pay you
back with a nice and pretty editing experience.</p>

<p><a href="http://itszero.github.com/images/posts/solarized-dark-vim.png" class="fancybox"><img src="http://itszero.github.com/images/posts/solarized-dark-vim.png" width="600" title="&#34;Solarized Dark vim&#34;" alt="&#34;Solarized Dark vim&#34;"></a></p>

<p>Two things I&rsquo;ll talk about today: Solarized Dark and Powerline.</p>

<h2>Solarized Dark</h2>

<p><a href="http://ethanschoonover.com/solarized">Solarized Dark</a> is a color palette designed by <a href="http://ethanschoonover.com/">Ethan Schoonover</a>. From my
experiences, this color scheme proves to be usable across many kinds of
computers and monitors. The colors are smooth and clear. Color settings for
most of daily use apps are provided on the official website. Even if it doesn&rsquo;t
provided officially, you usually still can find it somewhere on the Internet.
:-p In short, pretty color for your eyes and large userbase. Go get it now!</p>

<p>To use this color scheme (properly) in Vim, some prerequisites must be met.</p>

<ul>
<li>A decent terminal emulator with properly configured 256-colors support</li>
<li>Install vim-colors-solarized plugin</li>
</ul>


<p>Since there are way too many terminal apps to be introduced one-by-one, I&rsquo;ll
save your time from that. I can tell you that I&rsquo;m using this color scheme on
<a href="https://github.com/brantb/solarized/tree/master/iterm2-colors-solarized">iTerm2</a>, <a href="https://github.com/mavnn/mintty-colors-solarized">mintty</a>, <a href="https://github.com/sigurdga/gnome-terminal-colors-solarized">gnome-terminal</a>. Oh, Did I mention that I just gave your
links to those color scheme files? :-D</p>

<p>P.S. OSX&rsquo;s Terminal is no good, try iTerm2 if you&rsquo;re using OSX.</p>

<p>Once you prepared your terminal environment for colorful life, we can get to
the business. The vim-colors-solarized plugin can be installed by adding this
line to your .vimrc, given that you&rsquo;re using <a href="https://github.com/gmarik/vundle">Vundle</a>, and please do use it.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='vim'><span class='line'>Bundle <span class="s1">&#39;altercation/vim-colors-solarized&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="k">colorscheme</span> solarized
</span></code></pre></td></tr></table></div></figure>


<p>Save, reopen your vim, and run <code>:BundleInstall</code>. Do reopen your vim again, then
Voil!</p>

<h2>Powerline</h2>

<p><a href="https://github.com/Lokaltog/vim-powerline">Powerline</a> is a plugin designed to power your Vim&rsquo;s <strong>laststatus</strong>. It gives
you a super pretty and useful statusbar right after installation. If you want
to install this plugin, add those to your .vimrc.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='vim'><span class='line'>Bundle <span class="s1">&#39;Lokaltog/vim-powerline&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="k">let</span> <span class="k">g</span>:Powerline_symbols <span class="p">=</span> <span class="s1">&#39;fancy&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Set g:Powerline_symbols to <strong>fancy</strong> gives you best look, but it requires you
to use a patched font. You can find those fonts
<a href="https://github.com/Lokaltog/vim-powerline/wiki/Patched-fonts">here</a>.
To use those fonts, simple download it and change your favorite terminal app&rsquo;s
fonts to &ldquo;[Your favorite font name here] for Powerline&rdquo;.</p>

<h2>Conclusions</h2>

<p>Your Vim should now be look liked mine in the screenshot. However, this is just
a start. The real power of vim lies in the plugins. Maybe I&rsquo;ll write another
post to talk about my favorite vim plugins sometimes later. Bon voyage, on the
journey of becoming a power Vim user. :&ndash;)</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Show last modified date in Middleman]]></title>
    <link href="http://itszero.github.com/blog/2012/03/28/show-last-modified-date-in-middleman/"/>
    <updated>2012-03-28T13:39:00-04:00</updated>
    <id>http://itszero.github.com/blog/2012/03/28/show-last-modified-date-in-middleman</id>
    <content type="html"><![CDATA[<p>It is very convenient to build a static website using middleman along with some
tools like compass, twitter&rsquo;s bootstrap framework. You can easily build a
professional looking website while maintaining high code readability and
maintainability.</p>

<p>When you&rsquo;re designing a website for a conference or event, one thing that you
might want to put in the footer is the &ldquo;last modified date&rdquo;. The first way come
in to my mind to do this is very simple. Just put a line to output current date
in ruby code.</p>

<figure class='code'><figcaption><span>Wrong way to do last modified date</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='haml'><span class='line'>  Some website
</span><span class='line'>  <span class="si">#{</span><span class="s2">&quot;Last Modified: %s  &quot;</span> <span class="o">%</span> <span class="no">DateTime</span><span class="o">.</span><span class="n">now</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y/%m/%d&quot;</span><span class="p">)</span><span class="si">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>I was thinking that the middleman will only build changed file. Though this
code will show the last `build time&#8217;, but it&rsquo;ll act effectively as last
modified time for file. I was wrong. :( If you build the website in different
date, you&rsquo;ll find out hat middleman is smart enough to know that the evaluated
result of ruby code in the layout has changed. It will then rebuild every file
that includes this layout. However, it is very hard to know which file is being
generated in middleman. I tried lots of way and finally find this. When
middleman building a website, it simulates a Sinatra request in the following
format:</p>

<figure class='code'><figcaption><span>Wrong way to do last modified date</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='haml'><span class='line'>http://example.org/your_page.html
</span></code></pre></td></tr></table></div></figure>


<p>In sinatra, you can get the request via `request&#8217; object in page. This works in
middleman too. However, it gives you no clue about the real filename since the
engine extension has been stripped in output. Fortunatly, in most condition,
one file is going to use only one engine to build, so just append a * operator
after the path should be just fine. The result code would look like this:</p>

<figure class='code'><figcaption><span>Right way to do last modified date</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='haml'><span class='line'>  Some website
</span><span class='line'>  <span class="si">#{</span><span class="s2">&quot;Last Modified: %s  &quot;</span> <span class="o">%</span> <span class="no">File</span><span class="o">.</span><span class="n">mtime</span><span class="p">(</span><span class="no">Dir</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;source/</span><span class="si">#{</span><span class="n">request</span><span class="o">.</span><span class="n">path</span><span class="si">}</span>*&quot;)[0]).strftime(&quot;%m/%d/%Y&quot;)}
</span></code></pre></td></tr></table></div></figure>


<p>Voila, now you have it. :) If you have a better way to do this, please share with me!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Trying out the impress.js]]></title>
    <link href="http://itszero.github.com/blog/2012/01/06/try-out-impress-js/"/>
    <updated>2012-01-06T02:25:00-05:00</updated>
    <id>http://itszero.github.com/blog/2012/01/06/try-out-impress-js</id>
    <content type="html"><![CDATA[<p>There is a interesting javacsript library being released on the github these
days, the <a href="http://bartaz.github.com/impress.js/">impress.js</a>. Impress.js is a
framework for making presentations on a open canvas, or so called the
<a href="http://prezi.com">Prezi-style</a>. I tried out the Prezi few years ago. It&rsquo;s
cool, but as the README from the impress.js said: &ldquo;impress.js may not help you
if you have nothing interesting to say ;)&rdquo;. I don&rsquo;t really have a chance to
make a will-use-on-the-stage presentation on a Prezi.</p>

<p>Fortunately, there is a regular meeting of my lab, and it&rsquo;s just my turn to
present a read paper this week. I spent a whole night and messed around with
the impress.js. You can find my result here: <a href="http://itszero.github.com/attic/dynamic-ua-for-wsn/">A dynamic user authentication
scheme for wireless sensor network</a>. I&rsquo;m not really
get used to arrange contents flat, so the result is not perfect yet.</p>

<p><a href="http://itszero.github.com/images/impressjs_dynamic_ua.png" class="fancybox"><img src="http://itszero.github.com/images/impressjs_dynamic_ua.png" width="600" title="&#34;A presentation made using impress.js&#34;" alt="&#34;A presentation made using impress.js&#34;"></a></p>

<p>It&rsquo;s really fun to make slides using HTML5/CSS3, and make them <em>alive</em> through
impress.js. For example, I made that Smartcard entirely in the CSS3, which used
border-radius and linear-gradient properties. I also used some CSS3 animation
property in the Security Analysis section. Once you enter the slide, <em>Login
Replay</em> becomes larger and the other two fade out. Next slide zooms in on the
detail of login replay, the text will rotate for a little bit to give you a
visual clue. You can use whatever CSS3 trick you know to make a presentation.
Best of it? You can host it on whatever provider you want since it&rsquo;s just some
plain HTML/CSS/JS files. Dropbox? Sure. Github? Done.</p>

<p>However, it does have some strange quirk. First, the relative location and
zoom-on-active of slides seems not necessarily remain constant across
different computer / resolution / browser configuration set. My slides did
need some tweak to make sure no text being blocked out on both my iMac 27&#8221; and
MacBook Air 13&#8221;. You&rsquo;ll need to manually align your slides to the center, so
you can expect some negative values on X, Y values. It would be awesome if the
library can take care of this of me. :P</p>

<p>In any case, this is still a fascinating library worth you to play with.
Get it now on the github and perhaps you can make your own slides, or
better, contribute some patches back to the project.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Git Dashboard]]></title>
    <link href="http://itszero.github.com/blog/2011/11/18/git-dashboard/"/>
    <updated>2011-11-18T08:57:00-05:00</updated>
    <id>http://itszero.github.com/blog/2011/11/18/git-dashboard</id>
    <content type="html"><![CDATA[<p><a href="http://itszero.github.com/images/posts/git-dashboard.png" class="fancybox"><img src="http://itszero.github.com/images/posts/git-dashboard.png"></a></p>

<p>I actually made this dashboard few weeks ago, I&rsquo;m just too lazy to write this
down. /me <em>flee</em></p>

<p>This dashboard is made for collaboration with teams. I was a hackthon-ing with
<a href="http://o0o.cse.tw">bizkit</a> and <a href="http://www.facebook.com/itsftt">ftt</a>. We set
up the dashboard to pulls new data from the repository automatically and
display in this <em>pretty format</em>. It was only intended for fun but it turns out
very useful when merging works from everyone. The tool we used to make it
display on the desktop is called
<a href="http://mutablecode.com/apps/nerdtool">NerdTool</a>, and it was very easy to
setup. You just need to add a new entry with the following command. We have
another repository put under <code>~/.gitwatch</code> to prevent the work being interfered
when pulling new changes and to eliminate all local branches.</p>

<figure class='code'><figcaption><span>Command for git dashboard</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>date; <span class="nb">cd</span> /Users/Zero/.gitwatch/fun-taipei-fork-of-csim-saycheese; git pull &gt;/dev/null 2&gt;&amp;1; git lp2 --all | head -n 34
</span></code></pre></td></tr></table></div></figure>


<p>Oh, and for the lp2, it&rsquo;s actually abbrev. of log command with customized
format string. You could add the following entries to your <code>~/.gitconfig</code> file.</p>

<figure class='code'><figcaption><span>Add these to ~/.gitconfig</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='text'><span class='line'>[alias]
</span><span class='line'>  lp2 = log --abbrev-commit --decorate --graph --color --pretty=&quot;format:%C(yellow)%h%Cred%d\\ %C(cyan)%an%Creset:\\ %Cgreen%s%Creset\\ %ar&quot; --all
</span></code></pre></td></tr></table></div></figure>


<p>Now, have fun! :)</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[MetaWatch meets Google Maps]]></title>
    <link href="http://itszero.github.com/blog/2011/11/18/meta-watch-meets-google-maps/"/>
    <updated>2011-11-18T08:42:00-05:00</updated>
    <id>http://itszero.github.com/blog/2011/11/18/meta-watch-meets-google-maps</id>
    <content type="html"><![CDATA[<p><a href="http://itszero.github.com/images/posts/MetaPlay.jpg" class="fancybox"><img class="right" src="http://itszero.github.com/images/posts/MetaPlay.jpg" width="200" title="MetaPlay" ></a></p>

<p>MetaWatch just shipped out few days ago. Once I got the watch, I starts to play
with it, and to see what it is capable to do. I tried to use the intent-based
API and put together this little experiment. I use the phone to acquire current
location then retrieve Google Maps image for 96x96 display. Before you could
deliver images to the watch, you&rsquo;ll need to convert it to Black &amp; White image.
I used a threshold filter on the luminance channel for this, and the photo
above is the result. Kinda fun, but not really useful. Let&rsquo;s see what can be
done next..</p>

<p>Update: Source code are now available <a href="https://github.com/itszero/MetaLoc">here</a>!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Moved to Octopress]]></title>
    <link href="http://itszero.github.com/blog/2011/10/06/my-octopress-blog/"/>
    <updated>2011-10-06T07:23:00-04:00</updated>
    <id>http://itszero.github.com/blog/2011/10/06/my-octopress-blog</id>
    <content type="html"><![CDATA[<p>Just saw this new blogging system and I think I like the idea. :)
I think I&rsquo;ll move to this blog and try to write posts in English here.</p>
]]></content>
  </entry>
  
</feed>
